### Variables globales
@host = {{host}}
@contentType = {{contentType}}

# Nota: Para usar este archivo, primero ejecuta el login en auth.http
# El token JWT se guardará automáticamente y estará disponible para todas las peticiones

### Autenticación (opcional si ya tienes un token válido)
POST {{host}}/api/auth/login
Content-Type: {{contentType}}

{
  "username":"{{user}}",
  "password":"{{password}}"
}

> {%
    // Extraer el token de la respuesta
    var token = response.body.token;

    // Guardar el token en la variable de entorno global
    if (token) {
        client.global.set("auth_token", token);
        client.log("Token JWT guardado con éxito: " + token.substring(0, 15) + "...");
    }
%}

### Búsqueda de todas las transacciones de almacén pendientes
# Este endpoint busca todas las transacciones de almacén con estado contable PENDIENTE
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "estadoContable": "PENDIENTE"
}

### Búsqueda de todas las transacciones de almacén contabilizadas
# Este endpoint busca todas las transacciones de almacén con estado contable CONTABILIZADA
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "estadoContable": "CONTABILIZADA"
}

### Búsqueda de todas las transacciones de almacén que no requieren contabilización
# Este endpoint busca todas las transacciones de almacén con estado contable NO_APLICA
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "estadoContable": "NO_APLICA"
}

### Búsqueda de transacciones de almacén por rango de fechas
# Este endpoint busca transacciones de almacén dentro de un rango de fechas específico
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "fechaInicio": "2023-01-01T00:00:00",
  "fechaFin": "2023-12-31T23:59:59"
}

### Búsqueda combinada: transacciones pendientes en un rango de fechas
# Este endpoint busca transacciones de almacén pendientes dentro de un rango de fechas
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "estadoContable": "PENDIENTE",
  "fechaInicio": "2023-01-01T00:00:00",
  "fechaFin": "2023-12-31T23:59:59"
}

### Búsqueda combinada: transacciones contabilizadas en un rango de fechas
# Este endpoint busca transacciones de almacén contabilizadas dentro de un rango de fechas
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "estadoContable": "CONTABILIZADA",
  "fechaInicio": "2023-01-01T00:00:00",
  "fechaFin": "2023-12-31T23:59:59"
}

### Búsqueda de todas las transacciones (sin filtros de estado)
# Este endpoint busca todas las transacciones de almacén sin filtrar por estado contable
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
}

### Búsqueda con paginación personalizada (página 0, tamaño 5)
# Este endpoint busca transacciones de almacén con paginación personalizada
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "page": 0,
  "size": 5
}

### Búsqueda con paginación personalizada (página 1, tamaño 10)
# Este endpoint busca transacciones de almacén con paginación personalizada
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "page": 1,
  "size": 10
}

### Búsqueda completa: estado, rango de fechas y paginación personalizada
# Este endpoint combina todos los filtros disponibles
POST {{host}}/api/contabilidad/transacciones
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "estadoContable": "PENDIENTE",
  "fechaInicio": "2023-01-01T00:00:00",
  "fechaFin": "2023-12-31T23:59:59",
  "page": 0,
  "size": 20
}