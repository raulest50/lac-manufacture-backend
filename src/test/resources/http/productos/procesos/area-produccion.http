### Variables globales
@host = {{host}}
@contentType = {{contentType}}

# Nota: Si este endpoint requiere autenticación, primero ejecuta el login en auth.http
# El token JWT se guardará automáticamente y estará disponible para todas las peticiones

### Autenticación (opcional si ya tienes un token válido)
POST {{host}}/api/auth/login
Content-Type: {{contentType}}

{
  "username":"{{user}}",
  "password":"{{password}}"
}

> {%
    // Extraer el token de la respuesta
    var token = response.body.token;

    // Guardar el token en la variable de entorno global
    if (token) {
        client.global.set("auth_token", token);
        client.log("Token JWT guardado con éxito: " + token.substring(0, 15) + "...");
    }
%}

### Crear Área de Producción
POST {{host}}/api/areas-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "Área de Producción de Cremas",
  "descripcion": "Área dedicada a la producción de cremas faciales y corporales",
  "responsableId": 1
}

### Crear Área de Producción 2
POST {{host}}/api/areas-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "Área de Producción de Maquillaje",
  "descripcion": "Área dedicada a la producción de productos de maquillaje",
  "responsableId": 2
}

### Crear Área de Producción con nombre duplicado (debe fallar)
POST {{host}}/api/areas-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "Área de Producción de Cremas",
  "descripcion": "Intento de crear un área con nombre duplicado",
  "responsableId": 3
}

### Crear Área de Producción con responsable inexistente (debe fallar)
POST {{host}}/api/areas-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "Área de Producción de Perfumes",
  "descripcion": "Área dedicada a la producción de perfumes",
  "responsableId": 999
}