### Variables globales
@host = {{host}}
@contentType = {{contentType}}

### Autenticación (necesaria para todas las peticiones)
POST {{host}}/api/auth/login
Content-Type: {{contentType}}

{
  "username":"{{user}}",
  "password":"{{password}}"
}

> {%
    // Extraer el token de la respuesta
    var token = response.body.token;

    // Guardar el token en la variable de entorno global
    if (token) {
        client.global.set("auth_token", token);
        client.log("Token JWT guardado con éxito: " + token.substring(0, 15) + "...");
    }
%}

### Insertar Procesos de Producción

### Proceso 1: Marmitas base neutra
POST {{host}}/api/procesos-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "PROC-MARM",
  "descripcion": "Marmitas base neutra"
}

### Proceso 2: Mezcla concentrados
POST {{host}}/api/procesos-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "PROC-MIX",
  "descripcion": "Mezcla concentrados"
}

### Proceso 3: Ensamble empaque
POST {{host}}/api/procesos-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "PROC-EMP",
  "descripcion": "Ensamble empaque"
}

### Proceso 4: Producción completa
POST {{host}}/api/procesos-produccion
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "nombre": "PROC-PROD",
  "descripcion": "Producción completa"
}

### Insertar Materiales

### Material 1: Tambor neutro 200L
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "NT200",
  "nombre": "Tambor neutro 200L",
  "observaciones": "Materia prima para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 1
}

### Material 2: Fragancia A
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "FRA-A",
  "nombre": "Fragancia A",
  "observaciones": "Fragancia para productos",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 1
}

### Material 3: Fragancia B
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "FRA-B",
  "nombre": "Fragancia B",
  "observaciones": "Fragancia para productos",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 1
}

### Material 4: Fragancia C
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "FRA-C",
  "nombre": "Fragancia C",
  "observaciones": "Fragancia para productos",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 1
}

### Material 5: Fragancia D
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "FRA-D",
  "nombre": "Fragancia D",
  "observaciones": "Fragancia para productos",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 1
}

### Material 6: Fragancia E
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "FRA-E",
  "nombre": "Fragancia E",
  "observaciones": "Fragancia para productos",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 1
}

### Material 7: Envase plástico 1L
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "ENV-1L",
  "nombre": "Envase plástico 1 L (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Material 8: Tapa plástica 1L
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "TAP-1L",
  "nombre": "Tapa plástica 1 L (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Material 9: Etiqueta Tratamiento A
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "ET-A",
  "nombre": "Etiqueta Tratamiento A (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Material 10: Etiqueta Tratamiento B
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "ET-B",
  "nombre": "Etiqueta Tratamiento B (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Material 11: Etiqueta Tratamiento C
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "ET-C",
  "nombre": "Etiqueta Tratamiento C (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Material 12: Etiqueta Tratamiento D
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "ET-D",
  "nombre": "Etiqueta Tratamiento D (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Material 13: Etiqueta Tratamiento E
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "ET-E",
  "nombre": "Etiqueta Tratamiento E (unidad)",
  "observaciones": "Material de empaque",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "U",
  "cantidadUnidad": 1.0,
  "tipo_producto": "M",
  "tipoMaterial": 2
}

### Insertar Productos Semi-Terminados

### Semi-Terminado 1: Concentrado A
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "CONC-A",
  "nombre": "Concentrado A",
  "observaciones": "Concentrado para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "tambor",
  "cantidadUnidad": 1.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "NT200", "cantidad": 1},
    {"productoId": "FRA-A", "cantidad": 1}
  ],
  "procesoProduccion": {
    "nombre": "PROC-MIX",
    "descripcion": "Proceso de mezcla de concentrados"
  }
}

### Semi-Terminado 2: Concentrado B
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "CONC-B",
  "nombre": "Concentrado B",
  "observaciones": "Concentrado para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "tambor",
  "cantidadUnidad": 1.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "NT200", "cantidad": 1},
    {"productoId": "FRA-B", "cantidad": 1}
  ],
  "procesoProduccion": {
    "nombre": "PROC-MIX",
    "descripcion": "Proceso de mezcla de concentrados"
  }
}

### Semi-Terminado 3: Concentrado C
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "CONC-C",
  "nombre": "Concentrado C",
  "observaciones": "Concentrado para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "tambor",
  "cantidadUnidad": 1.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "NT200", "cantidad": 1},
    {"productoId": "FRA-C", "cantidad": 1}
  ],
  "procesoProduccion": {
    "nombre": "PROC-MIX",
    "descripcion": "Proceso de mezcla de concentrados"
  }
}

### Semi-Terminado 4: Concentrado D
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "CONC-D",
  "nombre": "Concentrado D",
  "observaciones": "Concentrado para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "tambor",
  "cantidadUnidad": 1.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "NT200", "cantidad": 1},
    {"productoId": "FRA-D", "cantidad": 1}
  ],
  "procesoProduccion": {
    "nombre": "PROC-MIX",
    "descripcion": "Proceso de mezcla de concentrados"
  }
}

### Semi-Terminado 5: Concentrado E
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "CONC-E",
  "nombre": "Concentrado E",
  "observaciones": "Concentrado para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "tambor",
  "cantidadUnidad": 1.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "NT200", "cantidad": 1},
    {"productoId": "FRA-E", "cantidad": 1}
  ],
  "procesoProduccion": {
    "nombre": "PROC-MIX",
    "descripcion": "Proceso de mezcla de concentrados"
  }
}

### Semi-Terminado 6: Kit empaque A
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "KIT-A",
  "nombre": "Kit empaque A",
  "observaciones": "Kit de empaque para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "juego empaque",
  "cantidadUnidad": 190.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "ENV-1L", "cantidad": 190},
    {"productoId": "TAP-1L", "cantidad": 190},
    {"productoId": "ET-A", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-EMP",
    "descripcion": "Proceso de ensamble de empaque"
  }
}

### Semi-Terminado 7: Kit empaque B
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "KIT-B",
  "nombre": "Kit empaque B",
  "observaciones": "Kit de empaque para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "juego empaque",
  "cantidadUnidad": 190.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "ENV-1L", "cantidad": 190},
    {"productoId": "TAP-1L", "cantidad": 190},
    {"productoId": "ET-B", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-EMP",
    "descripcion": "Proceso de ensamble de empaque"
  }
}

### Semi-Terminado 8: Kit empaque C
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "KIT-C",
  "nombre": "Kit empaque C",
  "observaciones": "Kit de empaque para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "juego empaque",
  "cantidadUnidad": 190.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "ENV-1L", "cantidad": 190},
    {"productoId": "TAP-1L", "cantidad": 190},
    {"productoId": "ET-C", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-EMP",
    "descripcion": "Proceso de ensamble de empaque"
  }
}

### Semi-Terminado 9: Kit empaque D
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "KIT-D",
  "nombre": "Kit empaque D",
  "observaciones": "Kit de empaque para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "juego empaque",
  "cantidadUnidad": 190.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "ENV-1L", "cantidad": 190},
    {"productoId": "TAP-1L", "cantidad": 190},
    {"productoId": "ET-D", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-EMP",
    "descripcion": "Proceso de ensamble de empaque"
  }
}

### Semi-Terminado 10: Kit empaque E
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "KIT-E",
  "nombre": "Kit empaque E",
  "observaciones": "Kit de empaque para producción",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "juego empaque",
  "cantidadUnidad": 190.0,
  "tipo_producto": "S",
  "insumos": [
    {"productoId": "ENV-1L", "cantidad": 190},
    {"productoId": "TAP-1L", "cantidad": 190},
    {"productoId": "ET-E", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-EMP",
    "descripcion": "Proceso de ensamble de empaque"
  }
}

### Insertar Productos Terminados

### Terminado 1: Tratamiento A
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "TRAT-A",
  "nombre": "Tratamiento A",
  "observaciones": "Producto terminado",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "unidad",
  "cantidadUnidad": 190.0,
  "tipo_producto": "T",
  "status": 0,
  "insumos": [
    {"productoId": "CONC-A", "cantidad": 1},
    {"productoId": "KIT-A", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-PROD",
    "descripcion": "Proceso de producción completa"
  }
}

### Terminado 2: Tratamiento B
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "TRAT-B",
  "nombre": "Tratamiento B",
  "observaciones": "Producto terminado",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "unidad",
  "cantidadUnidad": 190.0,
  "tipo_producto": "T",
  "status": 0,
  "insumos": [
    {"productoId": "CONC-B", "cantidad": 1},
    {"productoId": "KIT-B", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-PROD",
    "descripcion": "Proceso de producción completa"
  }
}

### Terminado 3: Tratamiento C
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "TRAT-C",
  "nombre": "Tratamiento C",
  "observaciones": "Producto terminado",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "unidad",
  "cantidadUnidad": 190.0,
  "tipo_producto": "T",
  "status": 0,
  "insumos": [
    {"productoId": "CONC-C", "cantidad": 1},
    {"productoId": "KIT-C", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-PROD",
    "descripcion": "Proceso de producción completa"
  }
}

### Terminado 4: Tratamiento D
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "TRAT-D",
  "nombre": "Tratamiento D",
  "observaciones": "Producto terminado",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "unidad",
  "cantidadUnidad": 190.0,
  "tipo_producto": "T",
  "status": 0,
  "insumos": [
    {"productoId": "CONC-D", "cantidad": 1},
    {"productoId": "KIT-D", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-PROD",
    "descripcion": "Proceso de producción completa"
  }
}

### Terminado 5: Tratamiento E
POST {{host}}/productos/save
Content-Type: {{contentType}}
Authorization: Bearer {{auth_token}}

{
  "productoId": "TRAT-E",
  "nombre": "Tratamiento E",
  "observaciones": "Producto terminado",
  "costo": 0,
  "iva_percentual": 19.0,
  "tipoUnidades": "unidad",
  "cantidadUnidad": 190.0,
  "tipo_producto": "T",
  "status": 0,
  "insumos": [
    {"productoId": "CONC-E", "cantidad": 1},
    {"productoId": "KIT-E", "cantidad": 190}
  ],
  "procesoProduccion": {
    "nombre": "PROC-PROD",
    "descripcion": "Proceso de producción completa"
  }
}

###
